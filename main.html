<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Chat - Customer Module</title>
<link type="text/css" rel="stylesheet" href="style.css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<script>
$(document).ready(function(){
    $("button").click(function(){
        $.ajax({
            url: "/conversation", 
            data: { 
                    "message": document.getElementById("usermsg").value
                },
            success: function(response) {
                    document.getElementById("chatbox").innerHTML = document.getElementById("chatbox").innerHTML + "<br>" + "User:" + document.getElementById("usermsg").value + "<br>" + "Agent:" + response;
                    document.getElementById("usermsg").value = "";
                },
                error: function(xhr) {
                    alert(xhr);
                }
         });
        
    });
    $("#usermsg").keypress(function(e){
        if(e.which == 13){//Enter key pressed
            $("button").click();//Trigger search button click event
        }
    });
});
</script>
</head>
 
<div id="wrapper">
    <div id="menu">
        <p class="welcome">Welcome, <b></b></p>
        <p class="logout"><a id="exit" href="#">Exit Chat</a></p>
        <div style="clear:both"></div>
    </div>
     
    <div id="chatbox"></div>
        <input name="message" type="text" id="usermsg" size="63" />
        <button type="button" >Send</button> 
</div>
</body>
</html>